<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Home</title>
    <link rel="stylesheet" href="https://unpkg.com/bootstrap-table@1.17.1/dist/bootstrap-table.min.css">
</head>
<body>
<h2>List Items</h2>
<div sec:authorize="hasRole('USER')">This is user.</div>
<div sec:authorize="hasRole('ADMIN')">This is admin.</div>
<table id="table"
       data-toggle="table"
       data-height="460"
       data-pagination="true"
       data-search="true"
       data-side-pagination="server"
       data-server-sort="true"
       data-query-params="queryParams"
       data-response-handler="responseHandler"
       data-url="/items">
    <thead>
      <tr>
        <th data-field="id" data-sortable="true">id</th>
        <th data-field="name" data-sortable="true">Name</th>
        <th data-field="description" data-sortable="true">Description</th>
        <th data-field="price">Price</th>
      </tr>
    </thead>
</table>

<script>
    function queryParams(params) {
        delete params.sort
        delete params.order
        return params
    }

    function responseHandler(res) {
        if ($('#table').bootstrapTable('getOptions').sortOrder === 'desc') {
            res.rows = res.rows.reverse()
        }
        return res
    }
</script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="https://unpkg.com/bootstrap-table@1.17.1/dist/bootstrap-table.min.js"></script>
</body>
</html>
